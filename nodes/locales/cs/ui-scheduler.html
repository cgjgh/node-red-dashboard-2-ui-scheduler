<script type="text/javascript">
    function _popoutSchedulerHelp(tag) {
        const startTag = (name) => `<${name}>`
        const endTag = (name) => `</${name}>`
        const winHtml = `
            ${startTag('html')}
                ${startTag('head')}
                    ${startTag('title')}nÃ¡povÄ›da ui-scheduler${endTag('title')}
                    ${startTag('style')}
                    .fade-in {
                        transition: opacity 1.5s ease-in-out;
                    }
                    .hidden {
                        opacity: 0;
                        visibility: hidden;
                    }
                    ${endTag('style')}
                ${endTag('head')}
                ${startTag('body')}
                    ${startTag('script')}
                        const styles = ${JSON.stringify([].map.call(document.querySelectorAll('[rel="stylesheet"]'), e => e.href))}
                        const head = document.head || document.getElementsByTagName('head')[0]
                        styles.forEach(href => {
                            const el = document.createElement('link');
                            el.rel="stylesheet"
                            el.href = href
                            head.appendChild(el);
                        })
                    ${endTag('script')}
                    <div class="red-ui-editor help-content hidden" style="height: 100%">
                        <div class="red-ui-sidebar-info">
                            <div class="red-ui-sidebar-help-stack red-ui-panels" style="height: 100%;">
                                <div class="red-ui-panel" style="overflow-y: auto;height: 100%;">
                                    <div class="red-ui-help" style="padding: 6px;height: 100%;">
                                        <h1 class="red-ui-help-title">ui-scheduler</h1>
                                        <div class="red-ui-help">
                                            <span class="red-ui-text-bidi-aware">
                                                ${RED.nodes.getNodeHelp('ui-scheduler')}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    ${startTag('script')}
                        if (navigator.clipboard) {
                            document.querySelector('.ui-scheduler-link-button').classList.add('hidden')
                            const content = document.querySelector('.help-content');
                            content.classList.add('hidden')
                            content.classList.remove('hidden')
                            content.classList.add('fade-in')
                            const copyButtonLabel = "KopÃ­rovat"
                            const blocks = document.querySelectorAll("pre.ui-scheduler-code")
                            blocks.forEach((block) => {
                                const button = document.createElement("button")
                                button.innerText = copyButtonLabel
                                button.classList.add('ui-scheduler-copy-button')
                                button.addEventListener("click", copyCode)
                                block.appendChild(button)
                            })
                        }
                        async function copyCode(event) {
                            const button = event.srcElement
                            const pre = button.parentElement
                            const code = pre.querySelector("code")
                            const text = code.innerText
                            await navigator.clipboard.writeText(text)
                        }
                    ${endTag('script')}
                ${endTag('body')}
            ${endTag('html')}`

        const BOM = new Uint8Array([0xEF, 0xBB, 0xBF])
        const winUrl = URL.createObjectURL(
            new Blob([BOM, winHtml], { encoding: 'UTF-8', type: 'text/html;charset=UTF-8' })
        )
        const win = window.open(
            winUrl + (tag ? '#' + tag : ''),
            'win',
            'width=800,height=600'
        )
    }
</script>

<script type="text/markdown" data-help-name="ui-scheduler">

    # ğŸ•™ Dokumentace nÃ¡povÄ›dy UI Scheduler

Tento dokument poskytuje komplexnÃ­ho prÅ¯vodce konfiguracÃ­ nastavenÃ­ uzlu UI Scheduler, pouÅ¾itÃ­m v rozhranÃ­ Dashboard a dalÅ¡Ã­mi informacemi. UI Scheduler umoÅ¾Åˆuje uÅ¾ivatelÅ¯m automatizovat Ãºkoly na zÃ¡kladÄ› Äasu, solÃ¡rnÃ­ch udÃ¡lostÃ­ nebo cron vÃ½razÅ¯.

## ğŸ‘† PouÅ¾Ã­vÃ¡nÃ­ UI Scheduler v Dashboard 2.0

#### ğŸ–¥ï¸ HlavnÃ­ rozhranÃ­

- **ğŸ› ï¸ Panel nÃ¡strojÅ¯**: 
  - **ğŸ” VÃ½bÄ›r tÃ©matu**: FiltrovÃ¡nÃ­ plÃ¡nÅ¯ podle tÃ©matu.
  - **â• TlaÄÃ­tko PÅ™idat plÃ¡n**: OtevÅ™enÃ­ dialogu pro vytvoÅ™enÃ­ novÃ©ho plÃ¡nu.
  - **â˜° NabÃ­dka**: PÅ™Ã­stup k dalÅ¡Ã­m moÅ¾nostem, jako je kontrola aktualizacÃ­ nebo nahlÃ¡Å¡enÃ­ problÃ©mu.

- **ğŸ“‹ Tabulka plÃ¡nÅ¯**: Zobrazuje vÅ¡echny plÃ¡ny s podrobnostmi, jako je jmÃ©no, popis a stav. MÅ¯Å¾ete rozbalit Å™Ã¡dky a zobrazit vÃ­ce podrobnostÃ­.

#### ğŸ—“ï¸ VytvoÅ™enÃ­ plÃ¡nu

1. **ğŸ–±ï¸ OtevÅ™Ã­t dialog plÃ¡nu**: KliknÄ›te na tlaÄÃ­tko â• v panelu nÃ¡strojÅ¯.
2. **âœï¸ Zadat podrobnosti plÃ¡nu**:
   - **ğŸ·ï¸ JmÃ©no**: Zadejte jedineÄnÃ© jmÃ©no pro plÃ¡n.
   - **ğŸ“‚ TÃ©ma**: Vyberte tÃ©ma z rozbalovacÃ­ nabÃ­dky. TÃ©mata jsou definovÃ¡na v **NastavenÃ­ uzlu**
   - **â²ï¸ Typ**: Vyberte plÃ¡novÃ¡nÃ­ ÄŒas (Time), SolÃ¡rnÃ­ (Solar) nebo Cron.
   - **ğŸ”„ Perioda**: Pro ÄasovÃ© plÃ¡ny vyberte periodu opakovÃ¡nÃ­.
   - **ğŸ•’ ÄŒas/Datum**: Nastavte poÄÃ¡teÄnÃ­ Äas a pÅ™Ã­padnÄ› koncovÃ½ Äas nebo dobu trvÃ¡nÃ­.
   - **ğŸ“¦ Dataset (Payload)**: Vyberte typ datasetu a v pÅ™Ã­padÄ› potÅ™eby definujte vlastnÃ­ datasety.
3. **ğŸ’¾ UloÅ¾it plÃ¡n**: KliknÄ›te na "UloÅ¾it" pro pÅ™idÃ¡nÃ­ plÃ¡nu.

#### âœï¸ Ãšprava plÃ¡nu

- **ğŸ–Šï¸ Upravit**: KliknÄ›te na plÃ¡n v tabulce pro rozbalenÃ­ Å™Ã¡dkÅ¯ a zobrazenÃ­ vÃ­ce podrobnostÃ­. KliknutÃ­m na ikonu tuÅ¾ky otevÅ™ete editaÄnÃ­ dialog. ProveÄte zmÄ›ny a uloÅ¾te.
- - **ğŸ—‘ï¸ Smazat**: KliknutÃ­m na ikonu mazÃ¡nÃ­ odstranÃ­te plÃ¡n.

#### ğŸ”„ Import a export plÃ¡nÅ¯

- **ğŸ“¤ Export**: KliknÄ›te na ikonu exportu pro zkopÃ­rovÃ¡nÃ­ JSON plÃ¡nu do schrÃ¡nky. _K dispozici pouze pÅ™i ÃºpravÄ› plÃ¡nu._
- **ğŸ“¥ Import**: KliknÄ›te na ikonu importu a vloÅ¾te JSON pro import plÃ¡nu. _K dispozici pouze pÅ™i vytvÃ¡Å™enÃ­ plÃ¡nu._

#### âš™ï¸ SprÃ¡va plÃ¡nÅ¯

- **ğŸ”„ Povolit/ZakÃ¡zat**: PouÅ¾ijte pÅ™epÃ­naÄ pro povolenÃ­ nebo zakÃ¡zÃ¡nÃ­ plÃ¡nÅ¯.

### ğŸš€ PokroÄilÃ© funkce

#### ğŸŒ SolÃ¡rnÃ­ udÃ¡losti

- PÅ™izpÅ¯sobte plÃ¡ny na zÃ¡kladÄ› solÃ¡rnÃ­ch udÃ¡lostÃ­ s posuny.
- PodporovanÃ© udÃ¡losti zahrnujÃ­ vÃ½chod slunce, zÃ¡pad slunce a rÅ¯znÃ© fÃ¡ze soumraku.

#### â° Cron vÃ½razy

- PouÅ¾ijte cron syntaxi pro sloÅ¾itÃ© potÅ™eby plÃ¡novÃ¡nÃ­.
- Podporuje standardnÃ­ cron pole a speciÃ¡lnÃ­ znaky.

#### ğŸ“¦ VlastnÃ­ datasety (Payloads)

- PouÅ¾Ã­vejte vlastnÃ­ datasety pro vÃ½stup plÃ¡nu. Datasety jsou definovÃ¡ny v **NastavenÃ­ uzlu**
- Podporuje JSON a dalÅ¡Ã­ datovÃ© formÃ¡ty.

## ğŸ› ï¸ NastavenÃ­ uzlu

#### ğŸ·ï¸ JmÃ©no
- **Pole**: `JmÃ©no`
- **Popis**: Zadejte jedineÄnÃ© jmÃ©no pro plÃ¡novaÄ. Toto jmÃ©no bude pouÅ¾ito k identifikaci plÃ¡novaÄe v systÃ©mu.
- **Typ vstupu**: Text (string)

#### ğŸ‘¥ Skupina
- **Pole**: `Skupina`
- **Popis**: Vyberte skupinu, do kterÃ© tento plÃ¡novaÄ patÅ™Ã­. Skupiny pomÃ¡hajÃ­ organizovat widgety v uÅ¾ivatelskÃ©m rozhranÃ­.
- **Typ vstupu**: RozbalovacÃ­ seznam (string)

#### ğŸ“ Velikost
- **Pole**: `Velikost`
- **Popis**: Upravte velikost widgetu plÃ¡novaÄe v uÅ¾ivatelskÃ©m rozhranÃ­. Lze nastavit ruÄnÄ› nebo pomocÃ­ prvku sizer.
- **Typ vstupu**: TlaÄÃ­tko (Element Sizer)

#### ğŸ·ï¸ Å tÃ­tek
- **Pole**: `Å tÃ­tek`
- **Popis**: Nastavte Å¡tÃ­tek pro plÃ¡novaÄ, kterÃ½ se zobrazÃ­ v uÅ¾ivatelskÃ©m rozhranÃ­.
- **Typ vstupu**: Text (string)

### ğŸŒ NastavenÃ­ lokalizace

#### ğŸŒ Jazyk
- **Pole**: `Jazyk`
- **Popis**: Vyberte jazyk pro rozhranÃ­ plÃ¡novaÄe. 
  - PodporovanÃ© jazyky zahrnujÃ­ AngliÄtinu, NÄ›mÄinu, FrancouzÅ¡tinu, ItalÅ¡tinu, HolandÅ¡tinu a Å panÄ›lÅ¡tinu.
  - TakÃ© upravte <code>~/.node-red/settings.js</code> a pÅ™idejte/odkomentujte nÃ¡sledujÃ­cÃ­ Å™Ã¡dek: <code>lang: 'cs'</code>. 
DostupnÃ© kÃ³dy jazykÅ¯ jsou: <code>en</code>, <code>de</code>, <code>fr</code>, <code>it</code>, <code>nl</code>, <code>es</code>, <code>pl</code>, <code>cs</code>, <code>zh-CN</code>
TÃ­mto se nastavÃ­ jazyk pouÅ¾Ã­vanÃ½ v uzlu UI Scheduler na serveru Node-Red.
- **Typ vstupu**: RozbalovacÃ­ seznam (string)

#### â° ÄŒasovÃ© pÃ¡smo
- **Pole**: `ÄŒasovÃ© pÃ¡smo`
- **Popis**: UrÄete ÄasovÃ© pÃ¡smo pro plÃ¡novaÄ. To ovlivÅˆuje, jak se vypoÄÃ­tÃ¡vajÃ­ a zobrazujÃ­ Äasy.
  - Nechte prÃ¡zdnÃ© pro systÃ©movÃ© ÄasovÃ© pÃ¡smo. 
  - PÅ™Ã­padnÄ› zadejte UTC nebo ÄasovÃ© pÃ¡smo ve formÃ¡tu Region/Oblast ([seznam](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones)).
- **Typ vstupu**: AutomatickÃ© doplÅˆovÃ¡nÃ­ textu (string)

#### ğŸ•’ 24hodinovÃ½ FormÃ¡t
- **Pole**: `PouÅ¾Ã­t 24hodinovÃ½ formÃ¡t`
- **Popis**: PÅ™epÃ­nÃ¡nÃ­ mezi 24hodinovÃ½m a 12hodinovÃ½m formÃ¡tem Äasu.
- **Typ vstupu**: ZaÅ¡krtÃ¡vacÃ­ polÃ­Äko (boolean)

### ğŸ“ NastavenÃ­ polohy

#### ğŸŒ Poloha
- **Pole**: `Poloha`
- **Popis**: Nastavte vÃ½chozÃ­ geografickou polohu pro vÃ½poÄty solÃ¡rnÃ­ch udÃ¡lostÃ­. MÅ¯Å¾e to bÃ½t pevnÃ¡ poloha nebo promÄ›nnÃ¡ prostÅ™edÃ­.
- **Typ vstupu**: Typed Input (string)

### ğŸ“¤ NastavenÃ­ vÃ½stupu

#### ğŸ“¬ VÃ½stup zprÃ¡v odpovÄ›di pÅ™Ã­kazu
- **Pole**: `VÃ½stup zprÃ¡v odpovÄ›di pÅ™Ã­kazu`
- **Popis**: Zvolte, jak majÃ­ bÃ½t odesÃ­lÃ¡ny odpovÄ›di na pÅ™Ã­kazy. MoÅ¾nosti zahrnujÃ­:
  - 1 vÃ½stup: VÅ¡echny zprÃ¡vy na vÃ½stup 1 (plÃ¡ny + odpovÄ›di na pÅ™Ã­kazy)
  - 2 vÃ½stupy: OdpovÄ›di na pÅ™Ã­kazy na vÃ½stup 1, ZprÃ¡vy plÃ¡nu na vÃ½stup 2
  - RozvÄ›tvenÃ­ (Fan out): OddÄ›lenÃ© vÃ½stupy pro zprÃ¡vy pÅ™Ã­kazÅ¯ a kaÅ¾dÃ© tÃ©ma
- **Typ vstupu**: RozbalovacÃ­ seznam (string)

#### ğŸ“ VÃ½stupnÃ­ vlastnost
- **Pole**: `VÃ½stupnÃ­ pole`
- **Popis**: UrÄete vlastnost v objektu zprÃ¡vy, kde bude uloÅ¾en vÃ½stup.
  - napÅ™. pokud je 'VÃ½stupnÃ­ pole' nastaveno na **data.value**, pak `msg.data.value` bude obsahovat hodnotu *payload*
  - `msg.topic` bude obsahovat nÃ¡zev tÃ©matu. To zjednoduÅ¡uje oddÄ›lenÃ­ toho, kterÃ½ plÃ¡n byl spuÅ¡tÄ›n
  - DalÅ¡Ã­ vlastnosti jsou takÃ© pÅ™idÃ¡ny do objektu msg. Zkontrolujte ladicÃ­ vÃ½stup (pouÅ¾ijte zobrazit celou zprÃ¡vu)

- **Typ vstupu**: Typed Input (string)

### ğŸ“Š NastavenÃ­ stavu

#### ğŸ“… Odeslat stav plÃ¡nÅ¯
- **Pole**: `Odeslat stav plÃ¡nÅ¯`
- **Popis**: Nakonfigurujte, jak Äasto se odesÃ­lÃ¡ stav plÃ¡nÅ¯ a zda odesÃ­lat aktivnÃ­ nebo neaktivnÃ­ stavy.
  - Toto je seskupeno podle tÃ©matu, takÅ¾e pokud jsou dva plÃ¡ny `aktivnÃ­` (v rozsahu Äasu startu a konce) pro stejnÃ© tÃ©ma, bude odeslÃ¡na pouze jedna zprÃ¡va s datasetem `true`. 
  - StejnÄ› tak, pokud je jeden plÃ¡n pro tÃ©ma `neaktivnÃ­` a druhÃ½ je `aktivnÃ­`, bude odeslÃ¡na pouze jedna zprÃ¡va s datasetem `true`. 
  - Pokud jsou oba plÃ¡ny `neaktivnÃ­`, bude odeslÃ¡na pouze jedna zprÃ¡va s datasetem `false`.
- **Typ vstupu**: ÄŒÃ­slo (Interval), ZaÅ¡krtÃ¡vacÃ­ polÃ­Äko (Stav AktivnÃ­/NeaktivnÃ­) (number, boolean)

### ğŸ’¾ NastavenÃ­ ÃºloÅ¾iÅ¡tÄ›

#### ğŸ—„ï¸ NÃ¡zev ÃºloÅ¾iÅ¡tÄ›
- **Pole**: `NÃ¡zev ÃºloÅ¾iÅ¡tÄ›`
- **Popis**: Vyberte metodu uklÃ¡dÃ¡nÃ­ pro uchovÃ¡nÃ­ plÃ¡nÅ¯. MoÅ¾nosti zahrnujÃ­:
  - Å½Ã¡dnÃ©: NeuklÃ¡dat plÃ¡ny. PlÃ¡ny budou ztraceny pÅ™i opÄ›tovnÃ©m nasazenÃ­ uzlu
  - LokÃ¡lnÃ­ souborovÃ½ systÃ©m: UloÅ¾it plÃ¡ny do lokÃ¡lnÃ­ho souborovÃ©ho systÃ©mu. PlÃ¡ny se uklÃ¡dajÃ­ do adresÃ¡Å™e s nÃ¡zvem `schedulerdata` ve vaÅ¡Ã­ sloÅ¾ce node-red
  - ÃšloÅ¾iÅ¡tÄ› kontextu uzlu: UloÅ¾it plÃ¡ny do kontextu uzlu. Tato ÃºloÅ¾iÅ¡tÄ› se automaticky naÄtou z vaÅ¡eho konfiguraÄnÃ­ho souboru node-red. Viz dokumentace [Kontexty Node-RED](https://nodered.org/docs/user-guide/context) pro vÃ­ce informacÃ­.
- **Typ vstupu**: RozbalovacÃ­ seznam (string)

### ğŸ“¨ TÃ©mata a datasety (Payloads)

#### ğŸ—‚ï¸ TÃ©mata
- **Pole**: `TÃ©mata`
- **Popis**: Definujte tÃ©mata pro plÃ¡novaÄ. TÃ©mata pomÃ¡hajÃ­ kategorizovat a spravovat plÃ¡ny.
  - Tato tÃ©mata lze pouÅ¾Ã­t v poli `TÃ©ma` plÃ¡nÅ¯ a lze je vybrat v uÅ¾ivatelskÃ©m rozhranÃ­ Node-Red Dashboard 2.0. 
  - V reÅ¾imu Fan Out budou zprÃ¡vy plÃ¡nu odesÃ­lÃ¡ny na vÃ½stup odpovÃ­dajÃ­cÃ­ tÃ©matu.
- **Typ vstupu**: UpravitelnÃ½ seznam (string)

#### ğŸ“¦ VlastnÃ­ datasety (Payloads)
- **Pole**: `VlastnÃ­ datasety`
- **Popis**: Definujte vlastnÃ­ datasety, kterÃ© se odeÅ¡lou pÅ™i spuÅ¡tÄ›nÃ­ plÃ¡nu. 
  - Datasety mohou bÃ½t rÅ¯znÃ½ch typÅ¯ vÄetnÄ› Å™etÄ›zce, ÄÃ­sla, booleanu a JSON.
  - Zde definovanÃ© datasety lze vybrat v uÅ¾ivatelskÃ©m rozhranÃ­ Dashboard.
  - ZmÄ›na hodnoty datasetu zde automaticky aktualizuje hodnoty datasetu vÅ¡ech plÃ¡nÅ¯ pouÅ¾Ã­vajÃ­cÃ­ch tento dataset 
- **Typ vstupu**: UpravitelnÃ½ seznam s Typed Input (string, number, boolean, JSON)

### âš™ï¸ PokroÄilÃ¡ nastavenÃ­

#### ğŸ•°ï¸ PouÅ¾Ã­t novÃ½ vÃ½bÄ›r Äasu
- **Pole**: `PouÅ¾Ã­t novÃ½ vÃ½bÄ›r Äasu`
- **Popis**: Povolit nebo zakÃ¡zat novÃ© rozhranÃ­ pro vÃ½bÄ›r Äasu.
- **Typ vstupu**: ZaÅ¡krtÃ¡vacÃ­ polÃ­Äko (boolean)

## ğŸ”§ Vstupy (PokroÄilÃ© pouÅ¾itÃ­)

#### TÃ©ma
VÄ›tÅ¡inou pÅ™Ã­kazÅ¯ lze zadat v tÃ©matu s nÃ¡zvem plÃ¡nu v datasetu (kde je to vhodnÃ©). PodporovanÃ¡ tÃ©mata pÅ™Ã­kazÅ¯...

- trigger
- status
- export
- remove
- pause
- stop
- start

Zahrnuje to tÃ©mata pÅ™Ã­kazÅ¯ `-all`, `-all-dynamic`, `-all-static`, `-topic`, `-active`,  `-active-dynamic`,  `-active-static`, `-inactive`, `-inactive-dynamic` a `-inactive-static` (napÅ™. export-all, stop-all-dynamic, start-all-static, remove-inactive-dynamic). Viz [pÅ™Ã­kazy](#ui-scheduler-commands-info) nÃ­Å¾e pro podrobnosti.

#### ğŸ“¦ Dataset (Payload)
Je moÅ¾nÃ© dynamicky pÅ™idÃ¡vat, odstraÅˆovat a ovlÃ¡dat plÃ¡ny vloÅ¾enÃ­m datasetu do uzlu. FormÃ¡t objektu datasetu (nebo pole objektÅ¯) zÃ¡visÃ­ na operaci. Viz nÃ­Å¾e pro podrobnosti. MÅ¯Å¾ete takÃ© exportovat plÃ¡ny z uÅ¾ivatelskÃ©ho rozhranÃ­ Dashboard v editaÄnÃ­m oknÄ› a vloÅ¾it vÃ½slednÃ½ JSON.

#### â• PÅ™idÃ¡nÃ­ jednoho (nebo vÃ­ce) plÃ¡nÅ¯
PÅ™Ã­klad...
```json
payload: {
  "command": "add",
  "schedule": [
    {
      "name": "Schedule",
      "topic": "Topic 1",
      "enabled": true,
      "scheduleType": "time",
      "period": "daily",
      "time": "00:00",
      "endTime": null,
      "days": [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ],
      "payloadType": true,
      "payloadValue": true
    },
    {
      "name": "Schedule 2",
      "topic": "Topic 1",
      "enabled": true,
      "scheduleType": "solar",
      "timespan": "time",
      "solarEvent": "sunrise",
      "offset": 5,
      "solarEventStart": false,
      "solarEventTimespanTime": "21:00",
      "payloadType": "true_false",
      "payloadValue": true,
      "endPayloadValue": false
    },
    {
      "name": "Schedule 3",
      "topic": "Topic 1",
      "enabled": true,
      "scheduleType": "time",
      "period": "minutes",
      "duration": 1,
      "timespan": "duration",
      "minutesInterval": 7,
      "payloadType": "true_false",
      "payloadValue": true,
      "endPayloadValue": false
    }
  ]
}
```

### ğŸ“Š ZÃ­skÃ¡nÃ­ stavu plÃ¡nu nebo odstranÄ›nÃ­ / zastavenÃ­ / pozastavenÃ­ / spuÅ¡tÄ›nÃ­ plÃ¡nu

#### Metoda TÃ©ma
```json
msg.topic = "command"; // command name - *see details below*,
msg.payload = "name"; //  name of the schedule
```

#### Metoda Dataset (Payload)
```json
payload: {
  "command": "*viz podrobnosti nÃ­Å¾e*",
  "name": "* jmÃ©no plÃ¡nu",
}
```

#### Podrobnosti
- command: (string|povinnÃ©) Operace k provedenÃ­ - mÅ¯Å¾e bÃ½t jedna z nÃ¡sledujÃ­cÃ­ch...
  - "trigger"
  - "status"
  - "export"
  - "remove"
  - "stop"
  - "pause"
  - "start"
- name: (string|volitelnÃ©) JmÃ©no plÃ¡nu, kterÃ½ mÃ¡ bÃ½t ovlivnÄ›n (nenÃ­ vyÅ¾adovÃ¡no pÅ™i pouÅ¾itÃ­ filtrÅ¯ -all, -active nebo -inactive)

#### ğŸ“ PoznÃ¡mky
- `trigger` spustÃ­ plÃ¡n pojmenovanÃ½ v `msg.payload`
- `status` vrÃ¡tÃ­ objekt s konfiguracÃ­ a stavem pojmenovanÃ©ho plÃ¡nu
- `export` vrÃ¡tÃ­ objekt s konfiguracÃ­ pojmenovanÃ©ho plÃ¡nu
- `remove` zastavÃ­ a odstranÃ­ plÃ¡n. Tato moÅ¾nost nemÃ¡ Å¾Ã¡dnÃ½ vÃ½stup.
- `stop` zastavÃ­ plÃ¡n urÄenÃ½ jmÃ©nem `name` a resetuje jeho internÃ­ ÄÃ­taÄ. Tato moÅ¾nost nemÃ¡ Å¾Ã¡dnÃ½ vÃ½stup.
- `pause` zastavÃ­ plÃ¡n urÄenÃ½ jmÃ©nem `name`, ale neresetuje jeho internÃ­ ÄÃ­taÄ. Tato moÅ¾nost nemÃ¡ Å¾Ã¡dnÃ½ vÃ½stup.
- `start` (znovu) spustÃ­ vÅ¡echny plÃ¡ny. JakÃ½koli plÃ¡n, kterÃ½ dosÃ¡hl svÃ©ho limitu, zaÄne od zaÄÃ¡tku. PozastavenÃ© plÃ¡ny budou obnoveny. Tato moÅ¾nost nemÃ¡ Å¾Ã¡dnÃ½ vÃ½stup.
- FILTR: pÅ™idÃ¡nÃ­ `-all` k jakÃ©mukoli z tÄ›chto pÅ™Ã­kazÅ¯ bude fungovat na vÅ¡ech plÃ¡nech. napÅ™. `status-all` vrÃ¡tÃ­ stav vÅ¡ech plÃ¡nÅ¯
- FILTR: pÅ™idÃ¡nÃ­ `-all-dynamic` k jakÃ©mukoli z tÄ›chto pÅ™Ã­kazÅ¯ ovlivnÃ­ pouze dynamickÃ© plÃ¡ny napÅ™. `remove-all-dynamic` odstranÃ­ vÅ¡echny dynamickÃ© plÃ¡ny
- FILTR: pÅ™idÃ¡nÃ­ `-all-static` k jakÃ©mukoli z tÄ›chto pÅ™Ã­kazÅ¯ ovlivnÃ­ pouze statickÃ© plÃ¡ny napÅ™. `stop-all-static`
- FILTR: pÅ™idÃ¡nÃ­ `-topic` k jakÃ©mukoli z tÄ›chto pÅ™Ã­kazÅ¯ ovlivnÃ­ pouze plÃ¡ny, jejichÅ¾ tÃ©ma odpovÃ­dÃ¡ tÃ©matu zadanÃ©mu v datasetu napÅ™. `stop-topic`
- FILTR: pÅ™idÃ¡nÃ­ `-active` k pÅ™Ã­kazÅ¯m status, export a remove bude fungovat na vÅ¡ech aktivnÃ­ch plÃ¡nech. napÅ™. `status-active`
- FILTR: pÅ™idÃ¡nÃ­ `-active-static` k pÅ™Ã­kazÅ¯m status, export a remove bude fungovat na vÅ¡ech statickÃ½ch plÃ¡nech, kterÃ© jsou aktivnÃ­. napÅ™. `status-active-static`
- FILTR: pÅ™idÃ¡nÃ­ `-active-dynamic` k pÅ™Ã­kazÅ¯m status, export a remove bude fungovat na vÅ¡ech dynamickÃ½ch plÃ¡nech, kterÃ© jsou aktivnÃ­. napÅ™. `status-active-dynamic`
- FILTR: pÅ™idÃ¡nÃ­ `-inactive` k pÅ™Ã­kazÅ¯m status, export a remove bude fungovat na vÅ¡ech neaktivnÃ­ch plÃ¡nech. napÅ™. `status-inactive`
- FILTR: pÅ™idÃ¡nÃ­ `-inactive-static` k pÅ™Ã­kazÅ¯m status, export a remove bude fungovat na vÅ¡ech statickÃ½ch plÃ¡nech, kterÃ© jsou neaktivnÃ­. napÅ™. `status-inactive-static`
- FILTR: pÅ™idÃ¡nÃ­ `-inactive-dynamic` k pÅ™Ã­kazÅ¯m status, export a remove bude fungovat na vÅ¡ech dynamickÃ½ch plÃ¡nech, kterÃ© jsou neaktivnÃ­. napÅ™. `status-inactive-dynamic`

#### ğŸ“– PÅ™Ã­klady
- PouÅ¾itÃ­ jednoduchÃ©ho pÅ™Ã­kazu tÃ©matu k ruÄnÃ­mu spuÅ¡tÄ›nÃ­ plÃ¡nu s nÃ¡zvem "schedule1"
  ```json
  msg: {
    "topic": "trigger",
    "payload": "schedule1"
  }
  ```
- PouÅ¾itÃ­ jednoduchÃ©ho pÅ™Ã­kazu tÃ©matu s tÃ©matem v datasetu ke spuÅ¡tÄ›nÃ­ vÅ¡ech plÃ¡nÅ¯ se zadanÃ½m tÃ©matem
  ```json
  msg: {
    "topic": "start-topic",
    "payload": { "topic": "Topic 1" }
  }
  ```
- PouÅ¾itÃ­ jednoduchÃ©ho pÅ™Ã­kazu tÃ©matu k exportu vÅ¡ech dynamicky pÅ™idanÃ½ch plÃ¡nÅ¯...
  ```json
  msg: {
    "topic": "export-all-dynamic"
  }
  ```
- PouÅ¾itÃ­ jednoduchÃ©ho pÅ™Ã­kazu tÃ©matu k odstranÄ›nÃ­ plÃ¡nu s nÃ¡zvem "schedule1"
  ```json
  msg: {
    "topic": "remove",
    "payload": "schedule1"
  }
  ```
- PouÅ¾itÃ­ datasetu cmd k pozastavenÃ­ vÅ¡ech plÃ¡nÅ¯...
  ```json
  payload: {
    "command": "pause-all"
  }
  ```
- PouÅ¾itÃ­ jednoduchÃ©ho pÅ™Ã­kazu tÃ©matu k odstranÄ›nÃ­ vÅ¡ech dynamickÃ½ch plÃ¡nÅ¯, kterÃ© skonÄily
  ```json
  msg: {
    "topic": "remove-inactive-dynamic"
  }
  ```

### ğŸ” Describe (Popis)

#### PÅ™Ã­klad: dataset cmd k popisu cron vÃ½razu
```json
{
  "command": "describe",
  "expressionType": "cron",
  "expression": "0 */5 * * * MON *",
  "timeZone": "Europe/London"
}
```

#### PÅ™Ã­klad: dataset cmd k zÃ­skÃ¡nÃ­ vÅ¡ech ÄasÅ¯ solÃ¡rnÃ­ch udÃ¡lostÃ­ + solÃ¡rnÃ­ho stavu v tomto Äase
```json
{
  "command": "describe",
  "expressionType": "solar",
  "location": "54.9992500,-1.4170300",
  "solarType": "all",
  "timeZone": "Europe/London"
}
```

#### PÅ™Ã­klad: dataset cmd k zÃ­skÃ¡nÃ­ 4 ÄasÅ¯ solÃ¡rnÃ­ch udÃ¡lostÃ­ + solÃ¡rnÃ­ pro konkrÃ©tnÃ­ bod v Äase
```json
{
  "command": "describe",
  "expressionType": "solar",
  "time": "2020-03-22 18:40",
  "location": "54.9992500,-1.4170300",
  "solarType": "selected",
  "solarEvents": "civilDawn,sunrise,sunset,civilDusk",
  "timeZone": "Europe/London"
}
```

#### Podrobnosti
VrÃ¡tÃ­ objekt v datasetu obsahujÃ­cÃ­ lidsky ÄitelnÃ© informace pro danÃ½ vÃ½raz.

- command: (string|povinnÃ©) Operace k provedenÃ­
- expression: (string|povinnÃ©) VÃ½raz pro popis
- timeZone: (string|volitelnÃ©) ÄŒasovÃ© pÃ¡smo k pouÅ¾itÃ­. Nechte prÃ¡zdnÃ© pro systÃ©movÃ© ÄasovÃ© pÃ¡smo. PÅ™Ã­padnÄ› zadejte UTC nebo ÄasovÃ© pÃ¡smo ve formÃ¡tu Region/Oblast ([seznam](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones))

## DalÅ¡Ã­ Info

### â° CronExpression
CRON vÃ½raz, datum, ÄÃ¡rkami oddÄ›lenÃ½ seznam dat nebo pole dat.

##### ğŸ“… Datum nebo Format Sekvence Dat
KdyÅ¾ si pÅ™ejete pouÅ¾Ã­t pevnÃ© datum nebo sekvenci dat, vÃ½raz mÅ¯Å¾e bÃ½t Å™etÄ›zcovÃ½m datem, ÄÃ¡rkami oddÄ›lenÃ½m seznamem dat, polem dat (Pole mÅ¯Å¾e obsahovat mix Å™etÄ›zcÅ¯, objektÅ¯ data a ÄasovÃ½ch razÃ­tek). PÅ™i zadÃ¡vÃ¡nÃ­ Å™etÄ›zcovÃ©ho data mÅ¯Å¾ete pouÅ¾Ã­t ÄasovÃ© pÃ¡smo napÅ™. "2020-01-01 00:00 GMT+2". MÅ¯Å¾ete dokonce mixovat ÄasovÃ¡ pÃ¡sma napÅ™. "2020-01-01 00:00 GMT+2, 2020-01-01 00:00 GMT-7".

##### â²ï¸ FormÃ¡t CRON
```
* * * * * * *    Pole               PovolenÃ© hodnoty  SpeciÃ¡lnÃ­ symboly
| | | | | | |    -----------------  ---------------   ---------------
`-|-|-|-|-|-|->  Sekunda (volit.)   0-59              * / , -
  `-|-|-|-|-|->  Minuta             0-59              * / , -
    `-|-|-|-|->  Hodina             0-23              * / , -
      `-|-|-|->  Den v mÄ›sÃ­ci       1-31              * / , - ? L W
        `-|-|->  MÄ›sÃ­c              1-12 or JAN-DEC   * / , -
          `-|->  Den v tÃ½dnu        0-7 or SUN-SAT    * / , - ? L #
            `->  Rok (volit.)       1970-2099         * / , -
```

##### ğŸ“ PoznÃ¡mky
- `*` HvÄ›zdiÄky oznaÄujÃ­, Å¾e cron vÃ½raz odpovÃ­dÃ¡ vÅ¡em hodnotÃ¡m pole. NapÅ™Ã­klad "*" v poli minuty znamenÃ¡ kaÅ¾dou minutu.
- `?` OtaznÃ­ky se pouÅ¾Ã­vajÃ­ k urÄenÃ­ 'Å¾Ã¡dnÃ© konkrÃ©tnÃ­ hodnoty' a jsou povoleny pro pole den v mÄ›sÃ­ci a den v tÃ½dnu. PouÅ¾Ã­vajÃ­ se mÃ­sto hvÄ›zdiÄky (*) k ponechÃ¡nÃ­ prÃ¡zdnÃ©ho pole den v mÄ›sÃ­ci nebo den v tÃ½dnu.
- `-` PomlÄky se pouÅ¾Ã­vajÃ­ k definovÃ¡nÃ­ rozsahÅ¯. NapÅ™Ã­klad "10-12" v poli hodiny znamenÃ¡ hodiny 10, 11 a 12.
- `,` ÄŒÃ¡rky se pouÅ¾Ã­vajÃ­ k oddÄ›lenÃ­ poloÅ¾ek seznamu. NapÅ™Ã­klad "MON,WED,FRI" v poli den v tÃ½dnu znamenÃ¡ dny PondÄ›lÃ­, StÅ™eda a PÃ¡tek.
- `/` LomÃ­tka se pouÅ¾Ã­vajÃ­ k indikaci pÅ™Ã­rÅ¯stkÅ¯. NapÅ™Ã­klad "0/15" v poli sekundy znamenÃ¡ sekundy 0, 15, 30 a 45. NavÃ­c "1/3" v poli den v mÄ›sÃ­ci znamenÃ¡ kaÅ¾dÃ½ 3. den poÄÃ­naje prvnÃ­m dnem v mÄ›sÃ­ci.
- `L` Zkratka pro "last" (poslednÃ­) a je povolena pro pole den v mÄ›sÃ­ci a den v tÃ½dnu. Znak "L" mÃ¡ jinÃ½ vÃ½znam v kaÅ¾dÃ©m z tÄ›chto dvou polÃ­. NapÅ™Ã­klad "L" v poli den v mÄ›sÃ­ci znamenÃ¡ poslednÃ­ den v mÄ›sÃ­ci. Pokud se pouÅ¾ije v poli den v tÃ½dnu, znamenÃ¡ 7 nebo SAT (Sobota). Pokud se vÅ¡ak pouÅ¾ije v poli den v tÃ½dnu po jinÃ© hodnotÄ›, znamenÃ¡ poslednÃ­ xxx den v mÄ›sÃ­ci. NapÅ™Ã­klad "6L" v poli den v tÃ½dnu znamenÃ¡ poslednÃ­ PÃ¡tek v mÄ›sÃ­ci.
- `W` Zkratka pro "weekday" (pracovnÃ­ den) a je povolena pro pole den v mÄ›sÃ­ci. Znak "W" se pouÅ¾Ã­vÃ¡ k urÄenÃ­ pracovnÃ­ho dne nejbliÅ¾Å¡Ã­ho k danÃ©mu dni. NapÅ™Ã­klad "15W" v poli den v mÄ›sÃ­ci znamenÃ¡ nejbliÅ¾Å¡Ã­ pracovnÃ­ den k 15. dni v mÄ›sÃ­ci. Proto, pokud je 15. Sobota, Ãºloha bÄ›Å¾Ã­ v PÃ¡tek 14. Znaky "L" a "W" lze kombinovat v poli den v mÄ›sÃ­ci. NapÅ™Ã­klad "LW" znamenÃ¡ poslednÃ­ pracovnÃ­ den v mÄ›sÃ­ci.
- `#` Znaky hash urÄujÃ­ konstrukce. NapÅ™Ã­klad "6#3" v poli den v tÃ½dnu znamenÃ¡ tÅ™etÃ­ PÃ¡tek v mÄ›sÃ­ci.

##### ğŸ“– PÅ™Ã­klady
- `* * * * * *` KaÅ¾dou sekundu
- `0 * * * * *` KaÅ¾dou minutu
- `0 */10 * * * *` KaÅ¾dÃ½ch 10 minut
- `0 */20 1 * * *` KaÅ¾dÃ½ch 20 minut, mezi 01:00 AM a 01:59 AM
- `0 15,30,45 * * * *` V 15, 30 a 45 minut po hodinÄ›
- `0 0 12 * * *` KaÅ¾dÃ½ den v poledne - 12pm
- `0 0 2 29 FEB * 2020/4` V 02:00 AM, dne 29. Ãšnora (pÅ™estupnÃ© roky)
- `0 0 7 * * MON#1 *` V 07:00 AM, prvnÃ­ PondÄ›lÃ­ v mÄ›sÃ­ci
- `0 0 12 * JAN,FEB,MAR,APR *` KaÅ¾dÃ½ den v poledne v Lednu, Ãšnoru, BÅ™eznu a Dubnu
- `* * 1W * *` KaÅ¾dou minutu, prvnÃ­ pracovnÃ­ den v mÄ›sÃ­ci
- `* * * * Tue#3` KaÅ¾dou minutu, tÅ™etÃ­ ÃšterÃ½ v mÄ›sÃ­ci
- `0 12 * * MONL` Ve 12:00 PM, poslednÃ­ PondÄ›lÃ­ v mÄ›sÃ­ci

Viz [zde](https://github.com/jaclarke/cronosjs) pro vÃ­ce pÅ™Ã­kladÅ¯ a informacÃ­.

#### ğŸŒ… SolÃ¡rnÃ­ UdÃ¡losti
| ID UdÃ¡losti | UdÃ¡lost | Informace |
|----------|-------|-------------|
| nightEnd | konec noci / astronomickÃ½ Ãºsvit | noc konÄÃ­, astronomickÃ½ soumrak zaÄÃ­nÃ¡ (-18Â°) |
| nauticalDawn | nautickÃ½ Ãºsvit | astronomickÃ½ soumrak konÄÃ­, nautickÃ½ Ãºsvit zaÄÃ­nÃ¡ (-12Â°) |
| civilDawn | obÄanskÃ½ Ãºsvit / zlatÃ¡ hodina | nautickÃ½ soumrak konÄÃ­, obÄanskÃ½ Ãºsvit a zlatÃ¡ hodina zaÄÃ­nÃ¡ (-6Â°) |
| sunrise | vÃ½chod slunce | hornÃ­ okraj slunce se objevÃ­ na obzoru (-0.833Â°) |
| sunriseEnd | konec vÃ½chodu slunce | spodnÃ­ okraj slunce se dotkne obzoru (-0.3Â°) |
| morningGoldenHourEnd | konec rannÃ­ zlatÃ© hodiny | kdyÅ¾ je slunce 6 stupÅˆÅ¯ nad obzorem (6Â°) |
| solarNoon | sluneÄnÃ­ poledne | slunce je v nejvyÅ¡Å¡Ã­ poloze |
| eveningGoldenHourStart | zaÄÃ¡tek veÄernÃ­ zlatÃ© hodiny | kdyÅ¾ je slunce 6 stupÅˆÅ¯ nad obzorem (6Â°) |
| sunsetStart | zaÄÃ¡tek zÃ¡padu slunce | spodnÃ­ okraj slunce se dotkne obzoru (-0.3Â°) |
| sunset | zÃ¡pad slunce | obÄanskÃ½ soumrak zaÄÃ­nÃ¡, slunce mizÃ­ pod obzorem (-0.833Â°) |
| civilDusk | obÄanskÃ½ soumrak / konec zlatÃ© hodiny | obÄanskÃ½ soumrak a zlatÃ¡ hodina konÄÃ­, nautickÃ½ soumrak zaÄÃ­nÃ¡ (-6Â°) |
| nauticalDusk | nautickÃ½ soumrak | nautickÃ½ soumrak konÄÃ­, astronomickÃ½ soumrak zaÄÃ­nÃ¡ (-12Â°) |
| nightStart | astronomickÃ½ soumrak / zaÄÃ¡tek noci | astronomickÃ½ soumrak konÄÃ­, noc zaÄÃ­nÃ¡ (-18Â°) |
| nadir | sluneÄnÃ­ pÅ¯lnoc | kdyÅ¾ je slunce nejblÃ­Å¾e nadiru a noc je ve stejnÃ© vzdÃ¡lenosti od soumraku a Ãºsvitu |

#### ğŸ“ ObecnÃ© PoznÃ¡mky
- PÅ™idÃ¡nÃ­ plÃ¡nu se stejnÃ½m nÃ¡zvem jako existujÃ­cÃ­ plÃ¡n nahradÃ­ ten existujÃ­cÃ­
- KdyÅ¾ uzel ui-scheduler odeÅ¡le msg v odpovÄ›di na pÅ™Ã­kaz, `msg.commandResponse` bude `true` pro indikaci, Å¾e zprÃ¡va je v odpovÄ›di na pÅ™Ã­kaz a ne naplÃ¡novanou udÃ¡lostÃ­
- KdyÅ¾ uzel ui-scheduler odeÅ¡le msg pro cron/solÃ¡rnÃ­ udÃ¡lost, `msg.scheduledEvent` bude `true` pro indikaci, Å¾e zprÃ¡va je zpÅ¯sobena naplÃ¡novanou udÃ¡lostÃ­ a ne kontrolnÃ­ odpovÄ›dÃ­
</script>